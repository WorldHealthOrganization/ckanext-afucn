{% set dataset_type = h.default_package_type() %}

{% block info %}
<div class="module context-info">
  <section class="module-content">
    {% block inner %}
    {% block heading %}
    <h1 class="heading ">
      {{ group.display_name }}
      {% if group.state == 'deleted' %}
        [{{ _('Deleted') }}]
      {% endif %}
    </h1>
    {% endblock %}
    {% block description %}
      <!-- Hidden input field to store the group data (field value) -->
         <input type="hidden" id="group-field-value" value="{{ group.title or ('&nbsp;'|safe) }}">
      <div>
        <h1 class="heading keyfigures">
            {{ _('Key Figures') }}
        </h1>
      </div>
      <div class="carousel-inner px-2" role="listbox">
        <div class="carousel-item active">
          <div class="row flex-column">
            <!-- First Item -->
            <div class="col-12 mb-4">
              <div class="topline topline-rw">
                <div class="row">
                  <div class="col-12 indicator-title">
                    Population, total
                  </div>
                  <div class="col-12 indicator-value">
                    <div class="topline-value">
                      <span data-module="bs_tooltip" data-bs-toggle="tooltip" data-module-placement="right" title=""
                        data-bs-original-title="people">1.44</span>
                      <span class="small"> bln </span>
                    </div>
                  </div>
                  <div class="col-12 mTop10">
                    <div class="row">
                      <div class="col-12">
                        <span class="source-title">World Bank</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <span><a class="source-link"
                          href="https://api.worldbank.org/v2/en/country/all/indicator/SP.POP.TOTL;EN.POP.DNST;NY.GDP.PCAP.PP.CD;AG.LND.TOTL.K2?source=2&amp;mrnev=1&amp;format=json&amp;per_page=10000"
                          target="_blank">Data</a></span> -
                        <span class="source-date">Jan 01, 2023</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Second Item -->
            <div class="col-12 mb-4">
              <div class="topline topline-rw">
                <div class="row">
                  <div class="col-12 indicator-title">
                    Population density
                  </div>
                  <div class="col-12 indicator-value">
                    <div class="topline-value">
                      <span data-module="bs_tooltip" data-bs-toggle="tooltip" data-module-placement="right" title=""
                        data-bs-original-title="people per sq. km of land area">479.4</span>
                    </div>
                  </div>
                  <div class="col-12 mTop10">
                    <div class="row">
                      <div class="col-12">
                        <span class="source-title">World Bank</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <span><a class="source-link"
                          href="https://api.worldbank.org/v2/en/country/all/indicator/SP.POP.TOTL;EN.POP.DNST;NY.GDP.PCAP.PP.CD;AG.LND.TOTL.K2?source=2&amp;mrnev=1&amp;format=json&amp;per_page=10000"
                          target="_blank">Data</a></span> -
                        <span class="source-date">Jan 01, 2022</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Third Item -->
            <div class="col-12 mb-4">
              <div class="topline topline-rw">
                <div class="row">
                  <div class="col-12 indicator-title">
                    GDP per capita, PPP (current international $)
                  </div>
                  <div class="col-12 indicator-value">
                    <div class="topline-value">
                      <span data-module="bs_tooltip" data-bs-toggle="tooltip" data-module-placement="right" title=""
                        data-bs-original-title="GDP per capita, PPP (current international $)">10.2</span>
                      <span class="small"> k </span>
                    </div>
                  </div>
                  <div class="col-12 mTop10">
                    <div class="row">
                      <div class="col-12">
                        <span class="source-title">World Bank</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <span><a class="source-link"
                          href="https://api.worldbank.org/v2/en/country/all/indicator/SP.POP.TOTL;EN.POP.DNST;NY.GDP.PCAP.PP.CD;AG.LND.TOTL.K2?source=2&amp;mrnev=1&amp;format=json&amp;per_page=10000"
                          target="_blank">Data</a></span> -
                        <span class="source-date">Jan 01, 2023</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
      
            <!-- Fourth Item -->
            <div class="col-12 mb-4">
              <div class="topline topline-rw">
                <div class="row">
                  <div class="col-12 indicator-title">
                    Land area
                  </div>
                  <div class="col-12 indicator-value">
                    <div class="topline-value">
                      <span data-module="bs_tooltip" data-bs-toggle="tooltip" data-module-placement="right" title=""
                        data-bs-original-title="sq. km">3</span>
                      <span class="small"> mln </span>
                    </div>
                  </div>
                  <div class="col-12 mTop10">
                    <div class="row">
                      <div class="col-12">
                        <span class="source-title">World Bank</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <span><a class="source-link"
                          href="https://api.worldbank.org/v2/en/country/all/indicator/SP.POP.TOTL;EN.POP.DNST;NY.GDP.PCAP.PP.CD;AG.LND.TOTL.K2?source=2&amp;mrnev=1&amp;format=json&amp;per_page=10000"
                          target="_blank">Data</a></span> -
                        <span class="source-date">Jan 01, 2022</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endblock %}
    {% endblock %}
  </section>
</div>
{% endblock %}

<!-- <script type="text/javascript" id="worldbank-data">

  async function fetchData() {

  const countryCode = document.getElementById('group-field-value').value;
  const url = `https://api.worldbank.org/v2/en/country/${countryCode}/indicator/SP.POP.TOTL;EN.POP.DNST;NY.GDP.PCAP.PP.CD;AG.LND.TOTL.K2?source=2&format=json`;

  try {
    const response = await fetch(url);
    const data = await response.json();

    // Filter out the data for the specific country
    const countryData = data[1].find(item => item.country.id === countryCode);

    if (countryData) {
      // Dynamically update the HTML with the fetched data
      document.querySelector('.indicator-title').textContent = countryData.indicator.value;
      document.querySelector('.indicator-value span').textContent = countryData.value;
    } else {
      console.log('No data available for this country');
    }
  } catch (error) {
    console.error('Error fetching data:', error);
  }
}

// Example: Fetch data for a specific country (e.g., USA)
fetchData();

</script> -->