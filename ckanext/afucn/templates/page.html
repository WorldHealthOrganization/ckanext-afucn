{# 
    This template extends the base CKAN template and customizes the main content area.
    It provides a hero section that can be overridden by child templates.
#}
{% ckan_extends %}

{% block maintag %}
    {# 
        The who_hero block is nested inside maintag to allow more granular overriding.
        Child templates can:
        1. Override just the who_hero block to change only the hero content
        2. Override the entire maintag block to replace everything
    #}
    {% block who_hero %}
        {% snippet 'snippets/who-hero.html' %}
    {% endblock %}
    {{ super() }}
{% endblock %}

{% block wrapper_class %} datasets-base {% endblock %}

{% block scripts %}
    {{ super() }}
    <!-- Chatbot Widget Button -->
    <div id="who-chatbot-widget">
      <button id="who-chatbot-open">
        <svg width="26" height="26" style="vertical-align:middle; margin-right:8px;" fill="#fff" viewBox="0 0 24 24"><path d="M12 3C7.03 3 3 6.58 3 11c0 2.12 1.02 4.04 2.76 5.49L5 21l5.24-2.36c.56.08 1.13.13 1.76.13 4.97 0 9-3.58 9-8s-4.03-8-9-8zm-2 8H7v2h3v-2H8c0-.55.45-1 1-1s1 .45 1 1h1c0-1.1-.9-2-2-2s-2 .9-2 2zm7 0h-3v2h3v-2zm-1-2c.55 0 1 .45 1 1h1c0-1.1-.9-2-2-2s-2 .9-2 2h1c0-.55.45-1 1-1z"/></svg>
        Chat with the data
      </button>
      <div id="who-chatbot-frame-container">
        <div id="who-chatbot-header">
          <span>WHO Chatbot</span>
          <button id="who-chatbot-close" title="Close">&times;</button>
        </div>
        <iframe id="who-chatbot-iframe"
          src="https://idataportal.afro.who.int/chat"
          allow="clipboard-write"
          frameborder="0"></iframe>
        <div id="who-chatbot-fallback">
          <p>
            Sorry, the chat cannot be embedded here.<br>
            <a href="https://idataportal.afro.who.int/chat" target="_blank" rel="noopener" style="color:#0093d5; text-decoration:underline;">Open Chat in new tab &rarr;</a>
          </p>
        </div>
      </div>
    </div>
{% endblock %}